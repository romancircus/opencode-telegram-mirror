{
  "version": "0.1.0-draft",
  "status": "PRELIMINARY - PENDING RESEARCH",
  "description": "Matrix falling code effect overlay",
  "nodes": {
    "1": {
      "id": 1,
      "type": "LoadVideo",
      "inputs": {
        "video_path": "INPUT_VIDEO_PATH"
      },
      "outputs": ["IMAGE"],
      "notes": "Load outlined video from stage 1"
    },
    "2": {
      "id": 2,
      "type": "MatrixCodeGenerator",
      "inputs": {
        "width": 1920,
        "height": 1080,
        "frames": "MATCH_INPUT",
        "code_density": 0.5,
        "fall_speed": 25,
        "characters": "katakana_mixed",
        "color": "#00FF41"
      },
      "outputs": ["MATRIX_LAYER"],
      "notes": "Generate falling Matrix code animation"
    },
    "3": {
      "id": 3,
      "type": "DepthEstimation",
      "inputs": {
        "image": ["1", 0],
        "model": "midas_v21"
      },
      "outputs": ["DEPTH_MAP"],
      "notes": "Create depth map for intelligent code placement"
    },
    "4": {
      "id": 4,
      "type": "DepthMaskedBlend",
      "inputs": {
        "foreground": ["2", 0],
        "background": ["1", 0],
        "depth_map": ["3", 0],
        "far_opacity": 0.8,
        "near_opacity": 0.3,
        "mode": "depth_aware"
      },
      "outputs": ["IMAGE"],
      "notes": "Less code over character face (near), more in background (far)"
    },
    "5": {
      "id": 5,
      "type": "ColorGrade",
      "inputs": {
        "image": ["4", 0],
        "highlights": "#00FF41",
        "midtones": "#008F11",
        "shadows": "#001100",
        "contrast": 1.2,
        "saturation": 1.3
      },
      "outputs": ["IMAGE"],
      "notes": "Matrix green color grading"
    },
    "6": {
      "id": 6,
      "type": "GlowEffect",
      "inputs": {
        "image": ["5", 0],
        "radius": 6,
        "intensity": 0.4,
        "color_bias": "#00FF41"
      },
      "outputs": ["IMAGE"],
      "notes": "Terminal phosphor glow"
    },
    "7": {
      "id": 7,
      "type": "SaveVideo",
      "inputs": {
        "images": ["6", 0],
        "output_path": "OUTPUT_PATH",
        "fps": 30,
        "format": "mp4"
      },
      "notes": "Export Matrix effect video"
    }
  },
  "parameters": {
    "matrix_code": {
      "density": {
        "default": 0.5,
        "range": [0.2, 0.8],
        "description": "Code density: 0.4-0.6 recommended for character visibility"
      },
      "fall_speed": {
        "default": 25,
        "range": [10, 40],
        "description": "Character fall speed (pixels/frame)"
      },
      "character_set": {
        "options": ["katakana", "katakana_mixed", "ascii", "custom"],
        "default": "katakana_mixed",
        "description": "Character set for falling code"
      }
    },
    "depth_masking": {
      "far_opacity": {
        "default": 0.8,
        "range": [0.5, 1.0],
        "description": "Code opacity in background (far from camera)"
      },
      "near_opacity": {
        "default": 0.3,
        "range": [0.0, 0.6],
        "description": "Code opacity over character (near camera) - KEEP LOW"
      }
    },
    "glow": {
      "radius": {
        "default": 6,
        "range": [2, 12],
        "description": "Glow radius in pixels"
      },
      "intensity": {
        "default": 0.4,
        "range": [0.1, 0.8],
        "description": "Glow strength"
      }
    }
  },
  "notes": [
    "DRAFT WORKFLOW - Code density/opacity pending research",
    "Depth masking CRITICAL: Less code over character face",
    "near_opacity should stay under 0.4 to preserve character recognition",
    "Test multiple density values (0.3, 0.5, 0.7) with sample frames"
  ]
}
